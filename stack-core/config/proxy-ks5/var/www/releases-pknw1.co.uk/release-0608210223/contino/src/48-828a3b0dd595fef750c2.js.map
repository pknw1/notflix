{"version":3,"sources":["webpack:///../src/components/picture.tsx","webpack:///../src/components/placeholder.tsx","webpack:///../src/components/main-image.tsx","webpack:///../src/components/lazy-hydrate.tsx"],"names":["Image","src","srcSet","loading","alt","shouldLoad","innerRef","props","React","decoding","undefined","ref","Picture","forwardRef","fallback","sources","sizes","fallbackImage","length","map","media","type","key","propTypes","PropTypes","isRequired","displayName","Placeholder","propName","componentName","Error","MainImage","lazyHydrate","root","hydrated","image","isLoading","isLoaded","toggleIsLoaded","imgClassName","imgStyle","objectPosition","backgroundColor","objectFit","width","height","layout","images","placeholder","wrapperBackgroundColor","current","hasSSRHtml","querySelector","hasNativeLazyLoadSupport","cacheKey","JSON","stringify","hasLoaded","hasImageLoaded","component","LayoutWrapper","getPlaceholderProps","className","getMainProps","render","hydrate"],"mappings":"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","file":"48-828a3b0dd595fef750c2.js","sourcesContent":["/* eslint-disable filenames/match-regex */\nimport React, {\n  FunctionComponent,\n  ImgHTMLAttributes,\n  forwardRef,\n  LegacyRef,\n} from \"react\"\nimport * as PropTypes from \"prop-types\"\n\nexport interface IResponsiveImageProps {\n  sizes?: string\n  srcSet: string\n}\n\nexport type SourceProps = IResponsiveImageProps &\n  (\n    | {\n        media: string\n        type?: string\n      }\n    | {\n        media?: string\n        type: string\n      }\n  )\n\ntype FallbackProps = { src: string } & Partial<IResponsiveImageProps>\n\ntype ImageProps = ImgHTMLAttributes<HTMLImageElement> & {\n  src: string\n  alt: string\n  shouldLoad: boolean\n  innerRef: LegacyRef<HTMLImageElement>\n}\n\nexport type PictureProps = ImgHTMLAttributes<HTMLImageElement> & {\n  fallback?: FallbackProps\n  sources?: Array<SourceProps>\n  alt: string\n  shouldLoad?: boolean\n}\n\nconst Image: FunctionComponent<ImageProps> = function Image({\n  src,\n  srcSet,\n  loading,\n  alt = ``,\n  shouldLoad,\n  innerRef,\n  ...props\n}) {\n  return (\n    <img\n      {...props}\n      decoding=\"async\"\n      loading={loading}\n      src={shouldLoad ? src : undefined}\n      data-src={!shouldLoad ? src : undefined}\n      srcSet={shouldLoad ? srcSet : undefined}\n      data-srcset={!shouldLoad ? srcSet : undefined}\n      alt={alt}\n      ref={innerRef}\n    />\n  )\n}\n\nexport const Picture = forwardRef<HTMLImageElement, PictureProps>(\n  function Picture(\n    { fallback, sources = [], shouldLoad = true, sizes, ...props },\n    ref\n  ) {\n    const fallbackImage = (\n      <Image\n        sizes={sizes}\n        {...props}\n        {...fallback}\n        shouldLoad={shouldLoad}\n        innerRef={ref}\n      />\n    )\n\n    if (!sources.length) {\n      return fallbackImage\n    }\n\n    return (\n      <picture>\n        {sources.map(({ media, srcSet, type }) => (\n          <source\n            key={`${media}-${type}-${srcSet}`}\n            type={type}\n            media={media}\n            srcSet={srcSet}\n            sizes={sizes}\n          />\n        ))}\n        {fallbackImage}\n      </picture>\n    )\n  }\n)\n\nImage.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  sizes: PropTypes.string,\n  srcSet: PropTypes.string,\n  shouldLoad: PropTypes.bool,\n}\n\nPicture.displayName = `Picture`\nPicture.propTypes = {\n  alt: PropTypes.string.isRequired,\n  shouldLoad: PropTypes.bool,\n  fallback: PropTypes.exact({\n    src: PropTypes.string.isRequired,\n    srcSet: PropTypes.string,\n    sizes: PropTypes.string,\n  }),\n  sources: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.exact({\n        media: PropTypes.string.isRequired,\n        type: PropTypes.string,\n        sizes: PropTypes.string,\n        srcSet: PropTypes.string.isRequired,\n      }),\n      PropTypes.exact({\n        media: PropTypes.string,\n        type: PropTypes.string.isRequired,\n        sizes: PropTypes.string,\n        srcSet: PropTypes.string.isRequired,\n      }),\n    ])\n  ),\n}\n","import React, { FunctionComponent, ImgHTMLAttributes } from \"react\"\nimport * as PropTypes from \"prop-types\"\nimport { Picture, SourceProps } from \"./picture\"\n\nexport type PlaceholderProps = ImgHTMLAttributes<{}> & {\n  fallback?: string\n  sources?: Array<SourceProps>\n}\n\nexport const Placeholder: FunctionComponent<PlaceholderProps> = function Placeholder({\n  fallback,\n  ...props\n}) {\n  if (fallback) {\n    return (\n      <Picture\n        {...props}\n        fallback={{\n          src: fallback,\n        }}\n        aria-hidden\n        alt=\"\"\n      />\n    )\n  } else {\n    return <div {...props}></div>\n  }\n}\n\nPlaceholder.displayName = `Placeholder`\nPlaceholder.propTypes = {\n  fallback: PropTypes.string,\n  sources: Picture.propTypes?.sources,\n  alt: function (props, propName, componentName): Error | null {\n    if (!props[propName]) {\n      return null\n    }\n    return new Error(\n      `Invalid prop \\`${propName}\\` supplied to \\`${componentName}\\`. Validation failed.`\n    )\n  },\n}\n","import React, { forwardRef } from \"react\"\nimport { Picture, PictureProps } from \"./picture\"\n\nexport type MainImageProps = PictureProps\n\nexport const MainImage = forwardRef<HTMLImageElement, MainImageProps>(\n  function MainImage({ ...props }, ref) {\n    return (\n      <>\n        <Picture ref={ref} {...props} />\n        <noscript>\n          <Picture {...props} shouldLoad={true} />\n        </noscript>\n      </>\n    )\n  }\n)\n\nMainImage.displayName = `MainImage`\nMainImage.propTypes = Picture.propTypes\n","import React, { MutableRefObject } from \"react\"\nimport { hydrate, render } from \"react-dom\"\nimport { GatsbyImageProps } from \"./gatsby-image.browser\"\nimport { LayoutWrapper } from \"./layout-wrapper\"\nimport { Placeholder } from \"./placeholder\"\nimport { MainImageProps, MainImage } from \"./main-image\"\nimport {\n  getMainProps,\n  getPlaceholderProps,\n  hasNativeLazyLoadSupport,\n  hasImageLoaded,\n} from \"./hooks\"\nimport { ReactElement } from \"react\"\n\ntype LazyHydrateProps = Omit<GatsbyImageProps, \"as\" | \"style\" | \"className\"> & {\n  isLoading: boolean\n  isLoaded: boolean // alwaystype SetStateAction<S> = S | ((prevState: S) => S);\n  toggleIsLoaded: Function\n  ref: MutableRefObject<HTMLImageElement | undefined>\n}\n\nexport function lazyHydrate(\n  {\n    image,\n    loading,\n    isLoading,\n    isLoaded,\n    toggleIsLoaded,\n    ref,\n    imgClassName,\n    imgStyle = {},\n    objectPosition,\n    backgroundColor,\n    objectFit = `cover`,\n    ...props\n  }: LazyHydrateProps,\n  root: MutableRefObject<HTMLElement | undefined>,\n  hydrated: MutableRefObject<boolean>\n): (() => void) | null {\n  const {\n    width,\n    height,\n    layout,\n    images,\n    placeholder,\n    backgroundColor: wrapperBackgroundColor,\n  } = image\n\n  if (!root.current) {\n    return null\n  }\n\n  const hasSSRHtml = root.current.querySelector(`[data-gatsby-image-ssr]`)\n  // On first server hydration do nothing\n  if (hasNativeLazyLoadSupport() && hasSSRHtml && !hydrated.current) {\n    return null\n  }\n\n  const cacheKey = JSON.stringify(images)\n  const hasLoaded = !hydrated.current && hasImageLoaded(cacheKey)\n\n  imgStyle = {\n    objectFit,\n    objectPosition,\n    backgroundColor,\n    ...imgStyle,\n  }\n\n  const component = (\n    <LayoutWrapper layout={layout} width={width} height={height}>\n      {!hasLoaded && (\n        <Placeholder\n          {...getPlaceholderProps(\n            placeholder,\n            isLoaded,\n            layout,\n            width,\n            height,\n            wrapperBackgroundColor\n          )}\n        />\n      )}\n      <MainImage\n        {...(props as Omit<MainImageProps, \"images\" | \"fallback\">)}\n        className={imgClassName}\n        {...getMainProps(\n          isLoading,\n          hasLoaded || isLoaded,\n          images,\n          loading,\n          toggleIsLoaded,\n          cacheKey,\n          ref,\n          imgStyle\n        )}\n      />\n    </LayoutWrapper>\n  )\n\n  const doRender = hydrated.current ? render : hydrate\n  doRender(component, root.current)\n  hydrated.current = true\n\n  return (): void => {\n    if (root.current) {\n      render((null as unknown) as ReactElement, root.current)\n    }\n  }\n}\n"],"sourceRoot":""}